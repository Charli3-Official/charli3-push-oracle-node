"""Mocked Vars and Functions for testing process"""

import json
import os
from typing import Any, Dict

import cbor2
from charli3_offchain_core.datums import (
    AggDatum,
    AggState,
    OraclePlatform,
    OracleSettings,
    PriceRewards,
)
from mocket.plugins.httpretty import httpretty
from pycardano import (
    Address,
    AssetName,
    ExtendedSigningKey,
    MultiAsset,
    Network,
    PaymentVerificationKey,
    PlutusV2Script,
    ScriptHash,
    TransactionId,
    TransactionInput,
)

from backend.api import AggregatedCoinRate

from .utxo_mocker import utxo_mocker

os.environ["NETWORK"] = "preprod"
os.environ["PROJECT_ID"] = "preprodjxcUodunMUMtjBqnyQ0bLMnREkXHa6CN"
os.environ["MAX_CALLS"] = "50000"

PROTOCOL_RESULT = {
    "minFeeCoefficient": 44,
    "minFeeConstant": 155381,
    "maxBlockBodySize": 65536,
    "maxBlockHeaderSize": 1100,
    "maxTxSize": 16384,
    "stakeKeyDeposit": 0,
    "poolDeposit": 0,
    "poolRetirementEpochBound": 18,
    "desiredNumberOfPools": 100,
    "poolInfluence": "0/1",
    "monetaryExpansion": "1/10",
    "treasuryExpansion": "1/10",
    "decentralizationParameter": "1/1",
    "extraEntropy": "neutral",
    "protocolVersion": {"major": 5, "minor": 0},
    "minPoolCost": 0,
    "coinsPerUtxoWord": 1,
    "coinsPerUtxoByte": 1,
    "prices": {"memory": "1/10", "steps": "1/10"},
    "maxExecutionUnitsPerTransaction": {"memory": 500000000000, "steps": 500000000000},
    "maxExecutionUnitsPerBlock": {"memory": 500000000000, "steps": 500000000000},
    "maxValueSize": 4000,
    "collateralPercentage": 1,
    "maxCollateralInputs": 5,
}

GENESIS_RESULT = {
    "systemStart": "2021-12-21T03:17:14.803874404Z",
    "networkMagic": 42,
    "network": "testnet",
    "activeSlotsCoefficient": "1/10",
    "securityParameter": 1000000000,
    "epochLength": 500,
    "slotsPerKesPeriod": 129600,
    "maxKesEvolutions": 60000000,
    "slotLength": 1,
    "updateQuorum": 2,
    "maxLovelaceSupply": 1000000000000,
    "protocolParameters": {
        "minUtxoValue": 1000000,
    },
}

MOCKED_ORACLE_ADDRESS = (
    "addr_test1wzy3mgdf6t7ltzcekf3dde2t27583q9lwjn2smsqh95g6agwgwcnm"
)

MOCKED_UPDATE_INTERVAL = 600

MOCKED_PERCENT_RESOLUTION = 10000

MOCKED_DESTINATION_ADDRESS = (
    "addr_test1wzy3mgdf6t7ltzcekf3dde2t27583q9lwjn2smsqh95g6agwgwcnm"
)

MOCKED_COLLECTION_TRIGGER = 10000000

MOCKED_SCRIPT_HASH = ScriptHash.from_primitive(
    "891da1a9d2fdf58b19b262d6e54b57a87880bf74a6a86e00b9688d75"
)

MOCKED_API_URL = "http://localhost:9083/api"
MOCKED_OGMIOS_URL = "ws://localhost:1337 "

MOCKED_BLOCKFROST_CONTEXT = (
    "preprodjxcUodunMUMtjBqnyQ0bLMnREkXHa6CN",
    Network.TESTNET,
    MOCKED_API_URL,
)

MOCKED_OGMIOS_CONTEXT = (
    MOCKED_OGMIOS_URL,
    Network.TESTNET,
)


MOCKED_UTXO_JSON = [
    {
        "address": "addr_test1wzy3mgdf6t7ltzcekf3dde2t27583q9lwjn2smsqh95g6agwgwcnm",
        "tx_hash": "11b8e9293d6fd63e4da589f7db03e20e7295db0472b047d8367959965b8ca204",
        "tx_index": 0,
        "output_index": 0,
        "amount": [{"unit": "lovelace", "quantity": "60000000"}],
        "block": "1492da90491b50cb1e91011784300078de027a15af22d935348fffb946e5d09e",
        "data_hash": None,
        "inline_datum": None,
        "reference_script_hash": "891da1a9d2fdf58b19b262d6e54b57a87880bf74a6a86e00b9688d75",
    },
    {
        "address": "addr_test1wzy3mgdf6t7ltzcekf3dde2t27583q9lwjn2smsqh95g6agwgwcnm",
        "tx_hash": "2bb242d5afac14b094cae3a112e2427a384914d3a7014f139920d3b427306f1d",
        "tx_index": 0,
        "output_index": 0,
        "amount": [
            {"unit": "lovelace", "quantity": "2000000"},
            {
                "unit": "d9c85fbc86b4291ef10d659ce1b36f48d0027c97f7e3cdaffb060a834e6f646546656564",
                "quantity": "1",
            },
        ],
        "block": "f55b85f17802fc9e0e37e36953b2726000afd0ff62571788849cced125309f9a",
        "data_hash": "950267e72339b25e51d0a6c9f3c48cc7b6bc693916a667871371ce5ce77612d5",
        "inline_datum": "d87a9fd8799f581cc336a4d3ef39913b63e61f92008d5191556ed3c3c5c11b50764bc1e4d8799fd8799f1a0006476c1b00000188989d88deffffffff",  # pylint: disable=line-too-long
        "reference_script_hash": None,
    },
    {
        "address": "addr_test1wzy3mgdf6t7ltzcekf3dde2t27583q9lwjn2smsqh95g6agwgwcnm",
        "tx_hash": "5050868f2b1336b98d9662a3978148435aafb8d562f086f1dea6f9d7fb157449",
        "tx_index": 0,
        "output_index": 0,
        "amount": [
            {"unit": "lovelace", "quantity": "2000000"},
            {
                "unit": "d9c85fbc86b4291ef10d659ce1b36f48d0027c97f7e3cdaffb060a834e6f646546656564",
                "quantity": "1",
            },
        ],
        "block": "f55b85f17802fc9e0e37e36953b2726000afd0ff62571788849cced125309f9a",
        "data_hash": "d4b193cc7ec9cb2907c3130c978120df954a2ac6f94635673706c92fb9001f77",
        "inline_datum": "d87a9fd8799f581cd1707e481671d473ee5a8d561aaac4a1f4e8c937ce61e5d11fc0611fd8799fd8799f1a000648341b00000188989d9fb0ffffffff",  # pylint: disable=line-too-long
        "reference_script_hash": None,
    },
    {
        "address": "addr_test1wzy3mgdf6t7ltzcekf3dde2t27583q9lwjn2smsqh95g6agwgwcnm",
        "tx_hash": "50d5eaa1ef4f47755c08d6c773396d710b6ca607d7a8c8bd565835da28393248",
        "tx_index": 0,
        "output_index": 0,
        "amount": [
            {"unit": "lovelace", "quantity": "2000000"},
            {
                "unit": "d9c85fbc86b4291ef10d659ce1b36f48d0027c97f7e3cdaffb060a834e6f646546656564",
                "quantity": "1",
            },
        ],
        "block": "3093cffe8e5aee7484fb5bdbd56b99768545d04718cdfaab1752363203d49167",
        "data_hash": "311bf876d7da09abec274431670ac0f6c99b640a71336324d94e5fb235969352",
        "inline_datum": "d87a9fd8799f581c3318ad8f0c743a674831d69e4c61c0d805eda695b0f20a4ff0edebc5d8799fd8799f1a000647d01b00000188989dbba0ffffffff",  # pylint: disable=line-too-long
        "reference_script_hash": None,
    },
    {
        "address": "addr_test1wzy3mgdf6t7ltzcekf3dde2t27583q9lwjn2smsqh95g6agwgwcnm",
        "tx_hash": "05ac4709085e808a8d26d220bd14b18737c29cc3ed90d426432c926c375146de",
        "tx_index": 0,
        "output_index": 0,
        "amount": [
            {"unit": "lovelace", "quantity": "2000000"},
            {
                "unit": "d9c85fbc86b4291ef10d659ce1b36f48d0027c97f7e3cdaffb060a834e6f646546656564",
                "quantity": "1",
            },
        ],
        "block": "1e978dc61da93c09ae2b78dc988e756bc1f2a21d11529f03dffb20e2ab174412",
        "data_hash": "90c142db91f7fc75a216894e6616893841952a60b1bd1c0d451c9b295e86271c",
        "inline_datum": "d87a9fd8799f581c5c222b7462a0ceb4d205a5a508f137560adf88630b9b7dcc53b183ddd8799fd8799f1a000648981b00000188989dd548ffffffff",  # pylint: disable=line-too-long
        "reference_script_hash": None,
    },
    {
        "address": "addr_test1wzy3mgdf6t7ltzcekf3dde2t27583q9lwjn2smsqh95g6agwgwcnm",
        "tx_hash": "e0cc1d25cdf3cc32a856819e3ebb8f626bc427465175ab4da9b6055a9c1fc6e2",
        "tx_index": 0,
        "output_index": 0,
        "amount": [
            {"unit": "lovelace", "quantity": "2000000"},
            {
                "unit": "d9c85fbc86b4291ef10d659ce1b36f48d0027c97f7e3cdaffb060a834e6f646546656564",
                "quantity": "1",
            },
        ],
        "block": "1e978dc61da93c09ae2b78dc988e756bc1f2a21d11529f03dffb20e2ab174412",
        "data_hash": "615763330b12fd84119dcd0295692c204c8a7802d2b736686965370a097ded3c",
        "inline_datum": "d87a9fd8799f581c30dfe7e985a9fa3cbf9fc0a5a6e3b4b4a1a184c3b9f8c2f2003458f2d8799fd8799f1a000647081b00000188989dee7affffffff",  # pylint: disable=line-too-long
        "reference_script_hash": None,
    },
    {
        "address": "addr_test1wzy3mgdf6t7ltzcekf3dde2t27583q9lwjn2smsqh95g6agwgwcnm",
        "tx_hash": "89c09d28358f7c718689b413d96a763fa90541c4f19ad13920d41dbcbfd633f5",
        "tx_index": 0,
        "output_index": 0,
        "amount": [
            {"unit": "lovelace", "quantity": "3000000"},
            {
                "unit": "436941ead56c61dbf9b92b5f566f7d5b9cac08f8c957f28f0bd60d4b5041594d454e54544f4b454e",  # pylint: disable=line-too-long
                "quantity": "920",
            },
            {
                "unit": "d9c85fbc86b4291ef10d659ce1b36f48d0027c97f7e3cdaffb060a834167675374617465",
                "quantity": "1",
            },
        ],
        "block": "5019a0fe76f0873afe009743de9ec518f9e0fcae7e86453914454ff134faad24",
        "data_hash": "210bd1e79d35c5cfd01c3fc5a5f9f147a4ca31090ddb8d9a94be23886c3767fd",
        "inline_datum": "d87b9fd8799fd8799f9f581cc336a4d3ef39913b63e61f92008d5191556ed3c3c5c11b50764bc1e4581cd1707e481671d473ee5a8d561aaac4a1f4e8c937ce61e5d11fc0611f581c3318ad8f0c743a674831d69e4c61c0d805eda695b0f20a4ff0edebc5581c5c222b7462a0ceb4d205a5a508f137560adf88630b9b7dcc53b183dd581c30dfe7e985a9fa3cbf9fc0a5a6e3b4b4a1a184c3b9f8c2f2003458f2ff1917701a001b77401a001b77401903e81927101a000493e0d8799f186418c81864ff021905dcd8799f9f581c1a550d5f572584e1add125b5712f709ac3b9828ad86581a4759022baff01ffffffff",  # pylint: disable=line-too-long
        "reference_script_hash": None,
    },
    {
        "address": "addr_test1wzy3mgdf6t7ltzcekf3dde2t27583q9lwjn2smsqh95g6agwgwcnm",
        "tx_hash": "89c09d28358f7c718689b413d96a763fa90541c4f19ad13920d41dbcbfd633f5",
        "tx_index": 1,
        "output_index": 1,
        "amount": [
            {"unit": "lovelace", "quantity": "2000000"},
            {
                "unit": "d9c85fbc86b4291ef10d659ce1b36f48d0027c97f7e3cdaffb060a834f7261636c6546656564",  # pylint: disable=line-too-long
                "quantity": "1",
            },
        ],
        "block": "5019a0fe76f0873afe009743de9ec518f9e0fcae7e86453914454ff134faad24",
        "data_hash": "0a10d24c7636c67714fab86d681d58b9f26363b35b3b938d1f9bf51048b9b969",
        "inline_datum": "d8799fd87b9fa3001a000647d0011b00000188989f14e0021b0000018898ba8c20ffff",
        "reference_script_hash": None,
    },
    {
        "address": "addr_test1wzy3mgdf6t7ltzcekf3dde2t27583q9lwjn2smsqh95g6agwgwcnm",
        "tx_hash": "89c09d28358f7c718689b413d96a763fa90541c4f19ad13920d41dbcbfd633f5",
        "tx_index": 2,
        "output_index": 2,
        "amount": [
            {"unit": "lovelace", "quantity": "3000000"},
            {
                "unit": "436941ead56c61dbf9b92b5f566f7d5b9cac08f8c957f28f0bd60d4b5041594d454e54544f4b454e",  # pylint: disable=line-too-long
                "quantity": "80",
            },
            {
                "unit": "d9c85fbc86b4291ef10d659ce1b36f48d0027c97f7e3cdaffb060a83526577617264",
                "quantity": "1",
            },
        ],
        "block": "5019a0fe76f0873afe009743de9ec518f9e0fcae7e86453914454ff134faad24",
        "data_hash": "98332a244e035f909edf3553179643b6340b68033a5e081bc20ec00c6422cd0f",
        "inline_datum": "d87c9fd8799f9fd8799f581cc336a4d3ef39913b63e61f92008d5191556ed3c3c5c11b50764bc1e41864ffd8799f581cd1707e481671d473ee5a8d561aaac4a1f4e8c937ce61e5d11fc0611f1864ffd8799f581c3318ad8f0c743a674831d69e4c61c0d805eda695b0f20a4ff0edebc51864ffd8799f581c5c222b7462a0ceb4d205a5a508f137560adf88630b9b7dcc53b183dd1864ffd8799f581c30dfe7e985a9fa3cbf9fc0a5a6e3b4b4a1a184c3b9f8c2f2003458f219012cffff1864ffff",  # pylint: disable=line-too-long
        "reference_script_hash": None,
    },
    {
        "address": "addr_test1wzy3mgdf6t7ltzcekf3dde2t27583q9lwjn2smsqh95g6agwgwcnm",
        "tx_hash": "11b8e9293d6fd63e4da589f7db03e20e7295db0472b047d8367959965b8ca204",
        "tx_index": 0,
        "output_index": 0,
        "amount": [{"unit": "lovelace", "quantity": "8000000"}],
        "block": "1492da90491b50cb1e91011784300078de027a15af22d935348fffb946e5d09e",
        "data_hash": None,
        "inline_datum": None,
        "reference_script_hash": None,
    },
]

MOCKED_AGG_STATE_UTXO_JSON = [MOCKED_UTXO_JSON[6]]

MOCKED_ORACLE_UTXO_JSON = [MOCKED_UTXO_JSON[7]]

MOCKED_EPOCH_JSON = {
    "epoch": 52,
    "start_time": 1676505600,
    "end_time": 1676937600,
    "first_block_time": 1676505642,
    "last_block_time": 1676629376,
    "block_count": 5046,
    "tx_count": 5923,
    "output": "221718628189527",
    "fees": "2336523636",
    "active_stake": "219784447694284",
}

MOCKED_NODE_UTXO_JSON = [MOCKED_UTXO_JSON[1], MOCKED_UTXO_JSON[2], MOCKED_UTXO_JSON[3]]

MOCKED_BLOCKFROST_API_CALL: Dict[str, Any] = {
    "api_url": MOCKED_API_URL,
    "api_call": {
        "v0_epochs_latest": {
            "url": "/v0/epochs/latest",
            "body": {},
            "response": MOCKED_EPOCH_JSON,
        },
        "api_v0_address_utxos": {
            "url": "/api/v0/addresses/addr_test1wzy3mgdf6t7ltzcekf3dde2t27583q9lwjn2smsqh95g6agwgwcnm/utxos",  # pylint: disable=line-too-long
            "body": {},
            "response": MOCKED_UTXO_JSON,
        },
        "api_v0_scripts_cbor": {
            "url": "/api/v0/scripts/891da1a9d2fdf58b19b262d6e54b57a87880bf74a6a86e00b9688d75/cbor",
            "body": {},
            "reponse": {
                "cbor": "5934cb01000032323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323232323222232323232325335304f222222350072235002222222222222325333333335017133335019230652222223501d223333500126262623500122350052222222222223232323533306707c0013355308d01096010980100322222353308401222222330c4012225335001100222135002232232232253353307f00701815333500300220052005002153353307d00501615333500113300a0090062005200500415335308301005213333500123300a3330800100e009330950100100300623300a3500b223500b222225333573461960266612e0201400e00c266666116026615e0201000a0080060040022c00c4660146661020201e0126612a0200200600c4660146661040201a0126612a0200200600c2c26a0024466a00446601201000a4c0f266106020f20244444464646464a666ae68cdc39a801856809a814859808a999ab9a3370e6a006158026a052164022a666ae68cdc39a801855809a814858808a999ab9a3370e6a006154026a052160022a66a660d26a006152026a05215e022a666ae68cdc39a801911a80111111104c009a81491111104b008a999ab9a3370e6a006446a004444444132026a05244444412e022a666ae68cdc79a801911a80111111104d009a81491111104c008980104f808008008008008008008008008980084c80919191919192999ab9a3370e660ec004050660ec00805026002146022600213c024646464a666ae68cdc39983c8010159983c80181589800853008980085080919299a9998480080180201709800999848008030040168980085100919299a9983c1a805111a801059009a804111a80105900898008540089800851809191a805911a80111191a807111a801111a80b111a80111111111119191a824911111111192999ab9a3371e0a40a82a66a0582a666ae68cdc4800a40002188022a666ae68cdc39999aa98668086700984a8084b00911a80111119b8000453353309501330bd010030020521001148000085200000115333573466e1ccccd54c3340433804c25404258043600408520000011533502415335027153350231533502215333573461cc026666aa619a0219c02612a0212c024466e00004cd4ccd54c33c0434004c2700426804c28c04008039200048008029200015333573466e1c02c07054ccd5cd1873009999aa98668086700984a8084b009119b800013353335530cf010d001309c0109a01309b010020204800120020194800054ccd5cd19b8733335530cd010ce01309501096012235002223370000666a666aa61a2021a402613c0213802614a0200402090012400003c90000058a999ab9a3370e6612802619a0219c0206600218c0221880221880221880221880221880218602186021860218602218802218802186021860266e04028cc24c04c3300433404024cc22404c3080430c04004cc2180425404024cc1e0c2c4042c804008c29804034d40542b004d401c2ac04d40042a404d4c1d402c23c04d400429c04d4c1cc01023404d4c1c401022c04ccc20c05d70410080a9a80084b00a99a99831800808109a800911a800911119842808020018b1983d838006131311982c00a00809999a80c918329111111a8039111111111a813111999a80093131311a800911a802911111111111191919191a9998388430080099aa984b8085000851008019111119191a99983c0468080419847808428080a911111a983e00091191919191a9984d8091111119299a99aa98580085c8083718360040980085780910a99a8008980198570080111098028598091986e00911299a80088011109a8011191191191299a9984b808038130a999a801801100290028010a99a9984a808028120a999a800899805004803100290028020a99a984d80802909999a800931198051a8241111111111a80a911a80a111111a80891299a800909a80091192999ab9a30f2013330be0101900d00c153353335530d8010d90130a5010a30130ac0100601615335021215333573466e2400ccd4c2140400480052000160020011616153353330870108501330c201330c2013098010010d301330c201309801337000020261a60205226666616202661aa0202c014661aa0200601201000e00c2c2c00c4c4c2c26a0024466a00446601201000a4c12202018446444464a66a666aa61700217202610a0210602426ae68cdc780080f01b89919299aa99a9a8201111111111a805111111111299a999a98608086680850008090048a999ab9a3370e0220102a666ae68cdc38080038a999ab9a3370e01e00c2a666ae68cdc38070028a99a99849008068020a999ab9a3370e018006226ae68cdc3805801061008610086100861008610086100861008598088588089a801111a8011111111112999ab9a3371e6a034446a002192020022a666ae68cdc419b823308c0130c5010c601014337061cc026611802618a0218c020880862178022646464a66a616402444446446a0924446a05c446a004446a01e446a004446a002446a00e44646464a66a66618c0201c01402c2a66a66602801c01a0182a66a6660280140120102a66a66610a04444a66a0041ba02442a66a666aa61cc021ce026166021620261640200400626600a0020062c01266610a04444a66a00420024426a00444a666ae68cdc78010268998038019987300998698080119b80001018005133007003330e6010040053335530e0010e2010df010010030dd0115333573466e3c01401c54ccd5cd19b873370000802000c1b40210c0210c0211202112021120211202666aa61be021c202446a00444a66a666aa61c8021ca0261620215e0261700200400a20062661c4020080061b80201866aa61ae021c00246a0021c40200261400224466614802446a00444a66a002426a0024466615602446a00444a666ae68cdc78048010998069986b0080119b805333573466e2409801854ccd5cd19b89006025101c148000520000010031003006013100300102f2225333573466e1ccc27c0400c010cdc0199aa98680086880984e8084f00900099aa98640086880869808011a80086a0086480886380899191919299aa99a99aa986200866808410098400080e0980086180910a99a800898019861008011109802863808a99a999858809a80e868009a802068008280991a827111a829111a8259111919192999ab9a3370e66617a0201601000e66617a0203801000e2a666ae68cdc380099b803370066e0000800c010014340041ec1ecccc2f004028024020ccc2ec0406802001ccdc100e8019a817868008610086100919299a801109801183d0008980086200919299a99aa98630086780842009841008028980086280910a99a80089801986200801110980286480919299a801109801183e000898008630091919299a802109801183c80089800a4000464a66a6a0b0444444444a66a020426464666ae68cdc419b8333704a666ae68cdc4000a4000261ec0200220021fe020040101aa021b40266e0404c004c20c040043500400454cd4d41608888888894cd404084c94cd4ccc2340422c04cc32004cc32004c27804c20c0400836404cc32004c27804cdc018418080100406c8099864009986400984f0080086c809986400984f0080086c80886a0086b0098568080706a00800864008a999ab9a3370e00200e2a66a00a42a66a00842a666ae68cdc400100080206480864008a99a801900186380863808991a81111191a801912999a9998438084180801184b008030a99a800801865808658080189a800912999a9998430084100984a80802801080086500866809850008009aa80b91110021a800865809a984c8080f8598085f00984c0080e9aa809905b009aa809105a00885e00858009a80085d809a98448080805180857009983f185b8085c009aa8021052808991919191919191919190919998008050020018011a80185f009a80185e809a80085f009a980119986e80911299a8010800910998028009985e008010019a80085e8085a80852009a980080285180986d8091299a8008b11099299aa999ab9a33710002900009803186a0080089803000899853808019985d008018010980280119b8100700225333573466e24cdc100086c0099b82030002113573466e20cdc199b820010d80100302f0ad01305e3305f064335530ad010b6012325333573466e200052000130cf0100110013370200400200460ba002660ba0c466aa6156021680246a00216c020026a002164026a61000201a13402a666ae68c31c04c344040044c8c8c8cc270054ccd5cd186500986a0080109984e0099835bad3574261a60200460d26ae84d5d11869808010b2999ab9a30ca0130d40100113309c013306b75a6ae84c34c04004c1a4d5d09aba230d3010011637546ae84d5d10011baa3574200261a0020022c6ea805ccd54c27404298042a004cc2380420c04054c1d4004d4004280054cd4cc1b400404484d400488d40048888cc23c0401000c58cc214041e8034c20c04cc21005d70021311982c00a00811982c00a00809999a80c918329111111a80e911999a80093131311a800911a802911111111111191919191a999983003e9a80e11111111100480099aa98470084b8084c808019111119191a999837842008040011111119191919192999ab9a3370e6a00a162026a05a16e022a666ae68cdc39a802858009a81685b008a999ab9a3370e6a00a15e026a05a16a022a666ae68cdc39a802857009a81685a008a99a998369a802856809a816859808a999ab9a3370e6a00a446a004444444138026a05a444444134022a666ae68cdc39a802911a80111111104e809a81691111104d808a999ab9a3371e6a00a446a00444444413c026a05a4444441380226004146020020020020020020020020022600213a024646464a666ae68cdc39983c0010151983c00181509800852808980085000919299a9998478080180201689800999847809aa80705700a8030160980085080919299a9983b9aa804111a801058809aa807911a8010588089800853808980085100919191aa805111a80111191aa80b111a80111191a80a911a80111111111119191a825111111111192999ab9a3371e0a60aa2a66a0522a666ae68cdc4800a4000218a022a666ae68cdc39999aa98670086780984b0084b80911a80111119b8000453353309601330be010030020531001148000089200030e60100115333573466e1ccccd54c3380433c04c2580425c0436404089200030e60100115335026153350251533502415333573461ce026666aa619c0219e02612c0212e024466e00004cd4ccd54c3400434404c2740426c04c29004008031200048008031200015333573466e1c02c07454ccd5cd19b8733335530ce010cf01309601097012235002223370000666a666aa61a4021a602613e0213a02614c0200402090012400003e90000058a999ab9a30e70133335530ce010cf0130960109701223370000266a666aa61a0021a202613a021360261380200403890002400403e90000a999ab9a3370e6613a02a05409e66e00ccd54c3380433c04c26c04270048004cd54c3180433c043440407cd40783480454ccd5cd19b8733335530ce010cf0130960109701223370000266a666aa61a0021a202613a021360261380200404a900124000666aa619a0219e0244a666ae68c3a404d40083500440044cc33804008004328040612000330950130ce010cf0102315333573466e1ccc25404c3380433c040e000431c044314044314044314044314044314044314044314043100431004310044314044314043100431004cdc09984a0098668086700804805198450098618086200800998438084b00804999aa985a8085b8091299a999aa985c0085c8098428084180984200801004880089985b00801000859008011983c1858808590080118530080d1836891199838911a80111111a8021119a80112999ab9a337126610a0200c06e900008040998059985080800998428080301b80410040008091a809855809a8020550089aa8008540089a983a001047009a98398018468089a983680104380998420083d0099a80084b80a99a99832000808909a800911a800911119843008020018b1983e03880699983b3ae075008233058014010262330580140101333350192626262350122235003223501b22333350012626262350012235005222222222222353061330603307906e00c00f2235001222235307e33355309501097012235002222253353306f00400a13309a010060051005092013307f0750102222533530753082013335530990109b012235002222253353307300400e13309e01006005100509601330830107901421333350012626262350012232323530880133355309f010a1012235002225333573466e3c0080184cc2880401000c400c2700408c894ccd5cd19b87337006661100201604e04c0026661100201e04e04c2a66a66610e0201e0160742a666ae68c2ec04cccd54c2880428c04c1a81ac88cdc000099a999aa985200852809838837983800100424000900119850009984680802240000069000099837012002884c8084c00884c80999aa984f0085000911a801112999ab9a3371e00400a20062661420200800613602044610c026610e02eb8048584cccd4064988d400488d406488cccd40049898988d400488d4014888888888888c8d4c180cc17ccc1e01b403404088d40048888c94ccd5cd19b8f01b008133307b00400102c08c01306633502b2230bb0122533500108f0122135002222253353307200400e15333573461720266610a020060140122a66a60f400c426666a0024601400e46a00244a666ae68cdc78010140a99a80090984c00804098060048980600491805003918050038980400289804002898040029983f03a008983b1983bbae00426261333350192306522222235007222222222350262233335001262626235001223500522222222222232323533330670840101c3500109f01335530950109e010a001002222225333573466e1ccc1a4c2880428c04014cc1a4c2880428c040844c8c8c8c8c94ccd5cd1860009999aa9853808540098378381119b800013353335530a9010aa0130760743075002005480012002330a501330920102c35028223500d2233309101001004003330a501350010ab0135001223335530a8010aa0122533357346188026a00415e0220022661520200400214a02004900009801051808980104f009a983b802854009192999ab9a3370e6666aa614e021500260de0e0164026142020089000185f8099b8048018cc1b8c29c042a0040284c00428c044c0042780494ccd5cd19b8f02c02e15333573466e1cd40ac88ccc23c0401800800542e00454ccd5cd19b873502a2233308f0100600200150b80115333573466e1cd40a488ccc23c0401800800542e00454ccd5cd19b87350272233308f0100600200130bf013306e30a7010a80100a153350011533500211357346180026666aa614e021500260de0e0446a004444466e00014ccd400920002480089200200548000274042740419c19c19c19c27404cccd54c2900429404c1b01b488d40088888d401088cd40088cc2ac04cc26004004cc1f00180b8020802000828004ccc21c05d7043008081984580840808088b299a99836000808109a800911a800911119847008020018b198420083c80611982c00a00811982c00a00811982c00a00809999a80c93131311a809111a801911a80d911999a80093131311a800911a8029111111111111a9830998301983c837006007911a80091111a983f199aa984a8084b80911a8011111299a9983780200509984d008030028802849009983f83a8081111299a983a984100999aa984c8084d80911a8011111299a9983980200709984f00803002880284b00998418083c80a109999a80093131311a8009119192999ab9a3370e66e00ccc21804024094090d408829004ccc218040340940904c004270044c00425c048c94ccd5cd19b8f350230a301350040a3011300109d01130010980123502322533500415333573466e3c00801454cd400c54ccd5cd185e009a803053808a99a9998440080800601d8a99a999a984c008520083780381304e00884d0084c80884d0084c8084c8084c809843009984380bae01216133335019230652222223500722222222235026223333500126262623500122350052222222222223232323533307008501001335530960109f010a101003222223533307508a010063308c0108201012222225333573466e3c0b40bc4c8d400488888888894cd4ccd4c2a0042d00421c040c802854cd4c1c002454cd4c1c001854cd4c1c000c54cd4c1b802054cd4c1b801c54cd4c1b80104d40148894cd4c1ac00c54cd4c1ac00854cd4c1ac0044c8c94ccd5cd19b883308701002039330870100103910af011323232325333573466e1ccc22c040040f4cc22c0400c0f454cd4ccc284040140180fc54cd4ccc2840400400c0f84d401088d400888d401888d4008894cd4ccd4c2e404314042400401800854cd4cc2400401400454ccd5cd19b87330930100b04533700666aa61880218a0261220212402400266aa61780218a0218e0200c6a00a190022a666ae68cdc79a802863008098a999ab9a3370e661260201208a661260201608a2a66a6661520201a01c08e26661520201201608c174022176022176022176020fa0fa16402164022166026a00217e026a61160203014a026a00217a026a611202022146026a036176026a01c4444444158020da0da0da152021520215202152021520215202152026a60f2006446a00444444444424666666666600201401201000e00c00a00800600401613c026a00213e02a66a660d8002020426a002446a00244446611c020080062c66108020f20184c4c4660b002802060c2660c4eb8010448004594ccd5cd183e9843808020991919191909198008028012999ab9a3084010011323232122223004005533357346112020022244440b62a666ae68c22004004442040454ccd5cd1843808008991909111111198008048041bad357426ae88c2340400cdd71aba1308c01002153335734610c020022646424444444660040120106eb8d5d09aba2308d01003375c6ae84c2300400854ccd5cd1842808008991909111111198030048041bae357426ae88c2340400cc158d5d09846008010a999ab9a3084010011321222222230070083056357426118020042a666ae68c20c040044c848888888c014020c158d5d09846008010b1846008009baa357426114020042a666ae68c20c040044c848888c008014c150d5d09845008010a999ab9a3082010011323212222300100553335734610402611802002264646424660020060046eb4d5d09aba2308d0100353335734610602611a0200226eb8d5d09846008008b1baa357426116020022c6ea8d5d09845008010a999ab9a308101001132122223003005375c6ae84c2280400858c22804004dd51aba13574461100200ca666ae68c1f8c220040044c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c8c848cccccccccccc00405c05404c04403c03402c02401c01400c008d5d09aba2002357420026ae88008d5d08009aba2002357420026ae88008d5d08009aba2002357420026ae88008d5d08009aba2002357420026ae88008d5d08009aba2002357420026ae88008d5d08009aba230880100235742610e020022c6ea8d5d09843008020b2999ab9a30820100111077153335734610202002220f22a666ae68cdc3a401c00222444440aa2a666ae68c20004004448888815c54ccd5cd183f000889111102b0a999ab9a307f0011107815333573460fa002220ec2a666ae68c1f0004441d458c21404dd5002299a9999999aba4004232325333573460fa002260b02444460040162a66a6611002446666aae7c004818c8cc194d5d080118019aba200206330860100205a2323221533500115333573461040200a2a66a6666666ae9001094ccd5cd1841009846009baa005133335573ea00840c246666aae7d401081888cccd55cf9aba2500525335305d35742a00e4264a66a6666666ae900048c8c94ccd5cd18450080089999aab9f3093010022069233335573e6ae88c2500400c8c94cd4ccccccd5d20009192999ab9a308f0130990100113233335573e00240de4646666aae7c00481c48cccd55cf9aba200225335306d3574200a42a66a60dc6ae8401084c1c448cc00400c0081c81c481c81ec1e8d5d100103c184c008008361baa002206c206c206c206c075213069306900106a35742612a0200840d40e60e42a666ae68c22c040044cccd55cf9849808011183303490348390339849808009baa002206620662066206606f213063123300100400206435742a00e0c440c60d80d60d40be40c040c040c040c00d24260ba24444600600a0bc2a666ae68c20c0401454cd4ccccccd5d200212999ab9a308201308c01375400a26666aae7d401081848cccd55cf9aba25005232533533333335748002464a666ae68c21c04c244040044c8cccd55cf80090339191999aab9f001206923233335573e00240d64646666aae7c00481b48c8cccd55cf80090379191999aab9f001207123233335573e00240e64646666aae7c00481d48c8cccd55cf800903b91999aab9f357440044a66a660e80e46ae8404c854cd4c1d0d5d080910a99a983a9aba101121533530763574202042a66a60ee6ae8403c84c94cd4ccccccd5d20009192999ab9a30a20130ac0100113233335573e0024104024646666aae7c0048210048c8cccd55cf80090430091999aab9f357440044a66a6104026ae8401c854cd4c20c04d5d080310a99a9842009aba100521308701123330010040030020880108701086012087010900108f013574400411a026ae8800822c04c2ac040041fcdd5001103f903f903f903f8440090a99a983d1aba100e215335307b3574201a42a66a60f66ae8403084c1fc48ccccccccc00402c02802402001c01401000c008200041fc1f81f4d5d080703d83d03c83c03b903c04080840009aba200207e357440040f86ae880081e8d5d100103c1aba2002076357440040e86ae880081c8d5d10010381848008008321baa002206420642064206406d21306100106235742a00c40c40d60d40be40c040c040c040c00d24260ba24444600800a0bc2a666ae68c2100401454cd4ccccccd5d200212999ab9a308201308c01375400a26666aae7d401081848cccd55cfa802103111999aab9f35744a00a4a66a660be0b86ae85401c854cd4c174d5d0a8039098310919800801801031831103183603583502f903010301030103003490982e89111180080282f02f1103009aba2500113087013754002610c020026ea801481648164816481641888400458dd500088298829119a98038009000a40004a66aa66a6600e980101000000121304f5335304d00121001160502100116104f25335001162232133307f222533500216223232153350051300105f221533500110062213005063253350031300205f221533500713004061221533500113006063221533500113370666e000280192004221300a06725335004162215335001162213300a00600100100133058002001232323232322330810122533500113002300405b22153350011002221300630080053005001307f225335001056221533500110032213305f333085012225335002100122153350031004221533353301200400213306600433007003005133066002330070060011330660043300700300500400230060013500304935002047350010453300200212222333004253350011301e1223300205a00122153350011302012233002005001221533353300a004002133300600223305f0050010011333007002302212233002006001001133300600223305f005001001222533500113305c3305c003002300605a221533353300a00500213305e3305e005004300800313330070023305e00500400113305e3305e00500430080032223253350021300105c221533353300b006002133300700223006330600070010011300305e1333007002230063306000700100123305d3003302112233002006001300700222323212333001230032223003004230032223002004230032223001004235300200335003001300200225335330024c101010000121304a53353048001210011604b22333333357480024c4660f444a66a00209c4426a00444a666ae68cdd780100489828000898030019983d111999aab9f00120552323305833045307d001307c0013004357440066ae84008154dd580113131302b09199999998008140011109ab9a337100040024426ae68cdc480100091199ab9a337120040020980a244666ae68cdc4001000826028912999ab9a337120040022002200444a666ae68cdc480100088010800912999ab9a3370e00400206a2a666ae68cdc48010008078089111a801111a801111a802911a801112999a9998068058030010a99a8008a99a8028999806005801803828899980600580180382889998060058018039111a801111a801912999a9998040038020010a99a8018800827826027911192999a80190a999a80190a999a802909802029098018288a999a8021098020290980182881b0088a999a802109801828898010280a999a8019098018288980102801a8a999a801100781a0070a999a80110a999a802109801828898010280a999a8019098018288980102801a8080a999a801909801028098008278a999a8011098010280980082781a12999a80110a999a80210a999a802109998040038010008b0b0b0088a999a80190a999a801909998038030010008b0b0b00800711a800831919aa982282710009999999aba40012325333573460d060e40022660e644a66a002094442666aa60a40a80a260080026666666ae900088c058488c94ccd5cd1839183d00089980199ba548010cc1ec894cd40044dd882b11099aba00023004001305230790010021002375400a4c4c4c4c0a8609460e20022c6ea80089898989813884d5cd183600091999999aba4001253353047306e37540042c442a66a0022004442c4c4c4c4c0982080464a666ae68c19000410c54ccd5cd18318008200b18361baa001103e2232325333573460ca00200c2a666ae68c1900044c02cc010d5d098360010a999ab9a306300100816306c0013754002426ae68cdc424000002220664a666ae68c19000454ccd5cd19b8900106503d0030031103010381037212223003004233500103d03b22350022235003225333573466e3c0100084cc05c00c0040e488c188894cd4004400c884cc018008c01000488ccc1848894cd40080e48854cd4ccd4cc1988848894cd40040f48854cd4cc0140080101084ccd4c01c12801401000410c01c00800c4cc01400400c4cc100008cc014004cc10000800c0040e4894ccd5cd19b87350020293500102915333573466e1cd40080a8d40040a844d5cd19b873500202b3500102b03203222333355002300300422337000029001000a400046604844666a00607a0020046a00207a660444446006600400240024446a006444444660c6444a66a00220044426a0044644644644a66a6603c00e0262a666a006004400a400a0042a66a6603800a0222a666a00226601401200c400a400a0082a66a604400a426666a00246601466603e01c0126606800200600c4660146a016446a016444446a01044a666ae68c1b0ccc0e003002402054cd4ccd54c14814cc07c074c09800806c4ccccc0b0cc14002801c01801401000c58580188cc028ccc08003c024cc0d000400c0188cc028ccc084034024cc0d000400c018584d400488cd40088cc02402001498060cc080894cd40080c040040b0894ccd5cd19b8f3500203835001038113573466e1cd40080e8d40040e80b08cc07c88ccd400c0e0008004d40040e0cc075c024000446a0024466603600800400244660ac44a66a0020544426a00444a66aa666ae68cdc79a80101d1a80381d089ab9a3370e6a0040786a00e07805c260580082600c0060044a66a002420022c446a004444444660b4444a66a00220044426a0044644644644a66a6602a00e0262a666a006004400a400a0042a66a6602600a0222a666a00226601401200c400a400a0082a66a603200a426666a00246601466602c01c0126605600200600c4c46601466602e01e0126605600200600c46601466603001a0126605600200600c2c26a0024466a00446601201000a4c01e446a004446a006446466a00a466a0084a666ae68cdc78010008018161016919a802101692999ab9a3371e0040020060582a66a00642a66a0044266a004466a004466a004466a00446601a0040024060466a004406046601a00400244406044466a0084060444a666ae68cdc38030018a999ab9a3370e00a0042660200080020620620542a66a00240540584426ae68cdc78010009109ab9a3370e0040024446a006446a008444446a01044a66a00a42c2a666ae68c140ccc0700040240204ccccc04001c018c0a8cc08400800401000c58888d400c88d401088888d4020894cd401085854ccd5cd182799980d8008048040999998078038030029814998100010008018b1111a801911a802111111a80411299a80190b0a999ab9a304e33301a00100900813333300e00700600500430283301f002001163333300102302301e01e01e22222123333300100600500400300223500122225333500216213333333574800246464a666ae68c11c0044c08848888c00802054cd4c0a4c1400080908c8c8854cd400454ccd5cd18260028a99a9999999aba4004253335734609860ac6ea80144cccd55cfa802101591999aab9f5004202c233335573e6ae89401494cd4c09cd5d0a8039099299a9999999aba4001232325333573460a800226666aae7cc17400880cc8cccd55cf9aba2305e003232533533333335748002464a666ae68c164c18c0044c8cccd55cf800901c9191999aab9f001203b233335573e6ae8800894cd4c0dcd5d080290a99a981c1aba100421303b123300100300203c03b203c0450443574400408460c400206c6ea800880d880d880d880d80fc84c0ccc0cc0040d0d5d0982f802101a01e81e0a999ab9a3055001133335573e60ba00446060066406607806260ba0026ea800880c080c080c080c00e484c0b448cc0040100080b8d5d0a803816101681b01a81a01490151015101510150199098138911118018028140a999ab9a304d00515335333333357480084a666ae68c130c158dd500289999aab9f5004202b233335573e6ae8940148c94cd4ccccccd5d20009192999ab9a3051305b00113233335573e00240624646666aae7c00480cc8c8cccd55cf800901a9191999aab9f001203723233335573e00240724646666aae7c00480ec8c8cccd55cf800901e9191999aab9f001203f23233335573e002408246666aae7cd5d10011299a9981f01e1aba1013215335303e3574202442a66a607e6ae84044854cd4c100d5d080810a99a98209aba100f2132533533333335748002464a666ae68c1b0c1d80044c8cccd55cf80090261191999aab9f001204e23233335573e00240a046666aae7cd5d10011299a98261aba1007215335304d3574200c42a66a609c6ae8401484c14448ccc00401000c0081481441408144168164d5d100102b9aba20020553075001049375400440924092409240920a442a66a60886ae84038854cd4c114d5d080690a99a98229aba100c2130491233333333300100b00a00900800700500400300204a0490480473574201c08a08808608408240840960946ae88008120d5d10010231aba2002044357440040846ae88008100d5d100101f1aba200203c3574400407460b400205c6ea800880b880b880b880b80dc84c0ac0040b0d5d0a803101601a81a01490151015101510150199098138911118020028140a999ab9a304e00515335333333357480084a666ae68c130c158dd500289999aab9f5004202b233335573ea008405846666aae7cd5d128029299a998148091aba15007215335301335742a00e426058246600200600405a058405a06c06a068052405440544054405406642604e24444600200a0500504405426ae8940044c144dd500098280009baa002202320232023202302c216233333335748002464a666ae68c100c1280044c8cccd55cf80090101191999aab9f0012022233335573e6ae8800894cd4c074d5d080290a99a980f9aba100421302233019002001023022202302c02b35744004052609200203a6ea8008807480748074807409888d400888d400c888888888888cc15c894cd400458884d400888d400488894ccd5cd182b99981180180c00b81b098050039980e0088061192999ab9a303d3047001132323212330010030023005357426ae88c12000d4ccd5cd181f1824000899191909198008018011bad357426ae88c12400d4ccd5cd181f982480089bae3574260900022c6ea8d5d098238008b1baa35742608c0022c6ea80048c94ccd5cd181e18230008991919191919191919091999800804803801801198063ae357426ae880114ccd5cd1822800899091118010021aba1304c0021533357346088002264244460020086eb8d5d098260010a999ab9a304300100c16304c00137546ae84004d5d10011998053ae009357420026ae88c11c00d4ccd5cd181e982380089919091980080180119803119192999ab9a3042001132323232122333001006004003375a6ae84d5d10011bad357420026ae88c12c00cdd69aba1304a0021533357346082002264244600400660106ae84c12800858c128004dd50009aba135744608e00460086ae84c11800458dd51aba1304500116375400246464a666ae68c0f40044c8488c00400cdd71aba13045002153335734607800226424460040066eb8d5d098228010b18228009baa0012232325333573460780022602e60086ae84c11400854ccd5cd181e80080c8b18228009baa0011100b3300175ceb4888cc10c88cccd55cf800900f1191981099807180398230009803182280098021aba2003357420040446eac004888d4004894ccd5cd19b87333006005002001333006004002001019101722233041223350014800088d4008894ccd5cd19b8f002008133047223350014800088d4008894ccd5cd19b8f00200d1001130060030011300600300310032533500116221533500110022216223303d2233335573e0024030466034600a6ae84008c00cd5d100100e1bac001233333300148811c1a550d5f572584e1add125b5712f709ac3b9828ad86581a4759022ba003300201c48810a4f7261636c6546656564003300201c4881084167675374617465003300201c48810652657761726400330024891c436941ead56c61dbf9b92b5f566f7d5b9cac08f8c957f28f0bd60d4b0048810c5041594d454e54544f4b454e003300201c4881084e6f646546656564002212330010030022323253335734606200226464646424466600200c0080066eb4d5d09aba2002375a6ae84004d5d1181d0019bad3574260720042a666ae68c0c00044c8c8c8488c00800d4ccd5cd181980089909118008019bae3574260760042a666ae68c0c80044c8488c00800cdd71aba1303b00216303b00137546ae84c0e400858c0e4004dd500091100191100111100091999999aba4001232533357346058606c0022646666aae7c00480308c8cccd55cf800900711999aab9f357440044a66a60126ae84014854cd4c02cd5d08021098070919800801801007807100780c00b9aba200201530350010093754004401240124012401202446666666ae9000480208020802080208c014dd700100891999999aba400120072007200723004375a004400e020446666666ae90004801c801c8cc0d088cccd55cf800918038079299a98031aba1002215335300435744006426012660260040020140120266eb0008801c801c0408488c00800cc0bc8848894cd400854cd4004024880208854cd400c0208854cd4cc01c0100084ccd4c02405401c00c00402840044034c0b08844894cd4004014884cc030c010008cd54c01803c010004400ccc0a88894cd40044008884d400888cc01ccccc0c488894cd40044008884d4008894ccd5cd18170008999804003803001899980400399809891998008040018010030018010030008018011814911999aab9f00120042330063574200460066ae880080104019262212233001004003302522112225335001100222133005002333553007009005004001302422112225335001135003009221333500500930040023335530070080050040011200122002235001002220014891cd9c85fbc86b4291ef10d659ce1b36f48d0027c97f7e3cdaffb060a8300223500200822350020082235002008223500200822350020082235002223700006400e400e400e400e400e2600e900110031111111100291111111003111111110039111111100411111110021b8148000dc3a40006e1d2002370e90021b8748018dc3a40106e1d200a370e90061b894800120a09c015573caae748c8c00400488cc00cc0080080041"  # pylint: disable=line-too-long
            },
        },
    },
}

MOCK_ORACLE_NFT_HASH = ScriptHash.from_primitive(
    "d9c85fbc86b4291ef10d659ce1b36f48d0027c97f7e3cdaffb060a83"
)

MOCKED_RUNNER_AGG_STATE = AggDatum(
    aggstate=AggState(
        ag_settings=OracleSettings(
            os_node_list=[
                b"\xc36\xa4\xd3\xef9\x91;c\xe6\x1f\x92\x00\x8dQ\x91Un\xd3\xc3\xc5\xc1\x1bPvK\xc1\xe4",  # pylint: disable=line-too-long
                b"\xd1p~H\x16q\xd4s\xeeZ\x8dV\x1a\xaa\xc4\xa1\xf4\xe8\xc97\xcea\xe5\xd1\x1f\xc0a\x1f",  # pylint: disable=line-too-long
                b"3\x18\xad\x8f\x0ct:gH1\xd6\x9eLa\xc0\xd8\x05\xed\xa6\x95\xb0\xf2\nO\xf0\xed\xeb\xc5",  # pylint: disable=line-too-long
                b'\\"+tb\xa0\xce\xb4\xd2\x05\xa5\xa5\x08\xf17V\n\xdf\x88c\x0b\x9b}\xccS\xb1\x83\xdd',  # pylint: disable=line-too-long
                b"0\xdf\xe7\xe9\x85\xa9\xfa<\xbf\x9f\xc0\xa5\xa6\xe3\xb4\xb4\xa1\xa1\x84\xc3\xb9\xf8\xc2\xf2\x004X\xf2",  # pylint: disable=line-too-long
            ],
            os_updated_nodes=6000,
            os_updated_node_time=1800000,
            os_aggregate_time=1800000,
            os_aggregate_change=1000,
            os_minimum_deposit=10000,
            os_node_fee_price=PriceRewards(
                node_fee=100, aggregate_fee=200, platform_fee=100
            ),
            os_iqr_multiplier=2,
            os_divergence=1500,
            os_platform=OraclePlatform(
                pmultisig_pkhs=[
                    b'\x1aU\r_W%\x84\xe1\xad\xd1%\xb5q/p\x9a\xc3\xb9\x82\x8a\xd8e\x81\xa4u\x90"\xba'
                ],
                pmultisig_threshold=1,
            ),
            os_aggregate_valid_range=300000,
        )
    )
)

PAYMENT_EXTENDED_KEY = {
    "type": "PaymentExtendedSigningKeyShelley_ed25519_bip32",
    "description": "Payment Signing Key",
    "cborHex": "5880a06bf80406028db54a4b72935898ee12481481b7ea757c185fe86b0452fcaf4e206b324b70638e06b5b5409b5647500923b7ee8c19851cea0ecad14f97436fb10fde20cb8e3a025e5979b5d70440cfaf6ada092b2d8da517a7fe8ecbf8eb4e1853f7b75e792c46af4baab99314f4f904b203bb0153db712195a30b7761e51090",
}

PAYMENT_VERIFICATION_KEY = {
    "type": "PaymentVerificationKeyShelley_ed25519",
    "description": "PaymentVerificationKeyShelley_ed25519",
    "cborHex": "58200fde20cb8e3a025e5979b5d70440cfaf6ada092b2d8da517a7fe8ecbf8eb4e18",
}


def node_config(context_provider):
    """Mocker for node config"""
    return (
        Network.TESTNET,
        context_provider,
        ExtendedSigningKey.from_json(json.dumps(PAYMENT_EXTENDED_KEY)),
        PaymentVerificationKey.from_json(json.dumps(PAYMENT_VERIFICATION_KEY)),
        MultiAsset.from_primitive(
            {MOCK_ORACLE_NFT_HASH.payload: {bytes("NodeFeed", "utf-8"): 1}}
        ),
        MultiAsset.from_primitive(
            {MOCK_ORACLE_NFT_HASH.payload: {bytes("AggState", "utf-8"): 1}}
        ),
        MultiAsset.from_primitive(
            {MOCK_ORACLE_NFT_HASH.payload: {bytes("OracleFeed", "utf-8"): 1}}
        ),
        MultiAsset.from_primitive(
            {MOCK_ORACLE_NFT_HASH.payload: {bytes("Reward", "utf-8"): 1}}
        ),
        Address.from_primitive(MOCKED_ORACLE_ADDRESS),
        MOCKED_SCRIPT_HASH,
        AssetName(bytes("PAYMENTTOKEN", "utf-8")),
        TransactionInput(
            TransactionId(
                bytes.fromhex(
                    "23b84b77971ab5eb36c8d9f5bed268bead3e136e02b99948bc9abf1bbeb5eaff"
                )
            ),
            0,
        ),
    )


def register_api_uri(path, url, body, response):
    """Helper method to mock http endpoints"""

    httpretty.register_uri(
        httpretty.GET,
        f"{path}{url}",
        body=json.dumps(body),
        **{
            "Content-Type": "application/json",
            "project_id": response,
        },
    )


def get_mocked_init(*args, **kwargs):
    """Overrides initalization. receives params, and returns nothing"""

    if args or kwargs:
        return None

    return None


MOCKED_UTXOS_RESPONSE = utxo_mocker(
    MOCKED_ORACLE_ADDRESS,
    MOCKED_UTXO_JSON,
)
MOCKED_UTXOS_RESPONSE[0].output.script = PlutusV2Script(
    cbor2.loads(
        bytes.fromhex(
            "59106301000033233223232332232323232323233222232322323223232533533300a5335333333357480124a66a666ae68cdc3a8042400001a01826a0322444600201a2a66a601c6aae794024540608c8c8c8c8c8854cd400454cd4ccd5cd19b87500f4800805004c54cd4ccccccd5d200391999ab9a3370e6aae7540152000233335573ea00a4a04446666aae7d40149408c8cccd55cf9aba25006253353232323333333574800646666ae68cdc39aab9d5003480008cccd55cfa8019281511999aab9f35744a0084a66a60526ae85401484d40b4004540ac940ac0a40a0940a4080940a0940a0940a0940a00984d55cf280089baa00135742a01042a66a646464646666666ae900108cccd5cd19b875002480008cccd55cfa8021281611999aab9f35744a00a4a66a646464646666666ae900108cccd5cd19b8735573aa008900011999aab9f500425034233335573ea0084a06a46666aae7cd5d128029299a98181aba15007215335303135742a00e426a07224660020060042a06e2a06c4a06c0680660644a0660544a0644a0644a0644a06406026ae8940044d55cf280089baa00135742a00c426a05e6a05e0022a05a4a05a05605446666ae68cdc3a801a400446666aae7d40148d40b940b4940b40ac940b008c088940a8940a8940a8940a80a04d55cea80109aab9e5001137540026ae85402084d409c48cc00400c008540945409094090088084080940840609408094080940809408007884d40844888c0080105407c54cd4ccd5cd19b87500f4801005004c54cd4ccccccd5d200391999ab9a3370e6aae75401d2000233335573ea00e4a04446666aae7cd5d128041299a991919191919191919191999999aba400a23333573466e1cd55cea8052400046666aae7d4028940c08cccd55cfa8051281891999aab9f500a25032233335573ea0144a06646666aae7d4028940d08cccd55cfa8051281a91999aab9f500a25036233335573ea0144a06e46666aae7cd5d128059299a991999999aba40012503a2503a2303537580044a0744a0740706ae85404c854cd4c0ccd5d0a80990a99a981a1aba15013215335303535742a02642a66a606c6ae85404c854cd4c8c8c8ccccccd5d200191999ab9a3370e6aae75400d2000233335573ea0064a08646666aae7cd5d128021299a981f1aba1500521350460011504425044042041250420392504125041250412504103f135573ca00226ea8004d5d0a80990a99a981c1aba15013215335303935742a026426a082246666666600201201000e00c00a0080060042a07e2a07c2a07a2a0782a0762a0742a0722a0704a07006c06a06806606406206005e05c4a05e04c4a05c4a05c4a05c4a05c05826ae8940044d5d1280089aba25001135744a00226ae8940044d5d1280089aba25001135573ca00226ea8004d5d0a804909a8128008a811928118108101281080c1281012810128101281000f109a810891118018020a80f8a80f910a81089aba25001135573ca00226ea800c4d55cf280089baa00125018250182501825018016210011326320103357389201154661696c656420746f20706172736520646174756d000163333573466e1d4011200c21222222200423333573466e1d4015200a21222222200223333573466e1d4019200821222222200123333573466e1d401d2006232122222223003008375c6ae84d55cf280491999ab9a3370ea010900210911111100391999ab9a3370ea012900110911111100311999ab9a3370ea014900010911111100291931900b99ab9c01701d01501401301201101000f3333573466e1cd55cea80124000466442466002006004646464646464646464646464646666ae68cdc39aab9d500c480008cccccccccccc88888888888848cccccccccccc00403403002c02802402001c01801401000c008d5d0a8061aba1500b35742a0146ae854024d5d0a8041aba1500735742a00c6ae854014d5d0a8021aba1500335742a0046ae84d5d1280111931900f99ab9c01f02501d135744a00226ae8940044d5d1280089aba25001135744a00226ae8940044d5d1280089aba25001135744a00226ae8940044d55cf280089baa00135742a0046464646666ae68cdc3a800a400c46424444600800a6464646464646666ae68cdc3a800a401842444444400646666ae68cdc3a8012401442444444400846666ae68cdc3a801a40104664424444444660020120106eb8d5d0a8029bad357426ae8940148cccd5cd19b875004480188cc8848888888cc008024020dd71aba15007375c6ae84d5d1280391999ab9a3370ea00a9002119910911111119803004804180f1aba15009375c6ae84d5d1280491999ab9a3370ea00c9001119091111111803804180f9aba135573ca01646666ae68cdc3a803a400046424444444600a01060406ae84d55cf280611931901119ab9c02202802001f01e01d01c01b01a135573aa00826aae79400c4d55cf280109aab9e5001137540026ae84d55cf280191999ab9a3370ea0049002119091111801002980a1aba135573ca00846666ae68cdc3a801a400446424444600200a6464646666ae68cdc39aab9d5002480008cc8848cc00400c008c8c8cccd5cd19b8735573aa002900011bae357426aae7940088c98c8078cd5ce00f01200e09baa00135742a0046eb4d5d09aba2500223263201b33573803604203226aae7940044dd50009aba135573ca00a46666ae68cdc3a8022400046424444600600a6eb8d5d09aab9e500623263201833573803003c02c02a02802626aae7540044dd50009aba135744a004464c6402266ae7004405c03c40584c98c8040cd5ce24810350543500016135573ca00226ea80044d55cea80089baa001135573aa00226ea8004488008488004c8004d5403088cccd55cf80092805119a8049aba10023003357440040084646464646666ae68cdc3a800a4004466644424466600200a0080066eb4d5d0a8021bad35742a0066eb4d5d09aba2500323333573466e1d4009200023212230020033232323333573466e1d400520022321223001003375c6ae84d55cf280191999ab9a3370ea004900011909118010019bae357426aae7940108c98c8038cd5ce00700a00600589aab9d5001137540026ae84d55cf280311931900499ab9c00900f007006135573aa00626ae8940044d55cf280089baa001499240103505431002333333357480024a0104a0104a01046a0126eb400894020018c8004d5401c88cccd55cf80091a804a8029299a98031aba1002215335300435744006426a01666a00c0040022a0122a01000c22440042442446600200800646666666ae90004940109401094010940108d4014dd70010010900089091180100188910008891918008009119801980100100099919191991191919911919191919191919191911111a800911a8011111111111911129999999a8088999a809119980e00080a280291980a80a00811980a80a0080999a8091181124c466036002a00a46044930999a8091181124c466036002a00a460449309980e009a80210999a809919980e80080aa80311980b00a80891980b00a80889980e009a80209810a4c2a66a66a022eb80044c0712622153350011002221302049888d4008888c888d401c888888888888c8c040004cd40548c8c8cccd5cd19b8735573aa00490001199109198008018011919191999ab9a3370e6aae754009200023322123300100300232323333573466e1cd55cea800a400046eb8d5d09aab9e500223263203033573804806005c26ea8004d5d0a8011bad357426ae8940088c98c80b4cd5ce01081681589aab9e5001137540026ae854008c8c8c8c8c8cccd5cd19b8735573aa00890001199991110919998008028020018011919191999ab9a3370e6aae7540092000233221233001003002302635742a00466a04a4646464646666ae68cdc3a800a4004466644424466600200a0080066eb4d5d0a8021bad35742a0066eb4d5d09aba2500323333573466e1d400920002321223002003302d357426aae7940188c98c80e8cd5ce01701d01c01b89aab9d5003135744a00226aae7940044dd50009aba135744a004464c6406666ae7009c0cc0c44d55cf280089baa00135742a008666aa040eb8cd54081d73ad35742a0066464646666ae68cdc3a800a4008464244460040086ae84d55cf280191999ab9a3370ea0049001119091118008021bae357426aae7940108cccd5cd19b875003480008488800c8c98c80d4cd5ce01481a81981901889aab9d5001137540026ae854008cd4085d71aba135744a004464c6405e66ae7008c0bc0b44d5d1280089aba25001135573ca00226ea8004d5d09aba2500223263202933573803a05204e26aae7940044dd5000806190009aa80b91299a80089931900c19ab9c491287370656e64696e6741676753746174655554784f3a204d697373696e67206167672073746174652e0001822135002223500122225335333573466e1cd402c88c8c8c00401cc8004d5409088cd400520002235002225335333573466e3c00802409c0984c01c0044c01800cc8004d5408c88cd400520002235002225335333573466e3c00801c09809440044c01800d200201e01d101e1300a0071232230023758002640026aa024446666aae7c004940388cd4034c010d5d080118019aba2002013112232230023756002640026aa02444646666aae7c0089403c8cd4038cc8848cc00400c008c018d55cea80118029aab9e500230043574400602826ae84004488c8c8cccd5cd19b875001480008c8488c00800cc014d5d09aab9e500323333573466e1d40092002212200123263201433573801002802402226aae7540044dd5000919191999ab9a3370ea002900111909118008019bae357426aae79400c8cccd5cd19b875002480008c8488c00800cdd71aba135573ca008464c6402466ae7001804804003c4d55cea80089baa0014910350543100225335333573466e3cd40088800800402c028402c4cd5ce24926636865636b5369676e656442794e6f64653a2057726f6e67206e6f6465206f70657261746f720000a22235003222222223500a2222253353301100f00e1018133355301212001323212330012233350052200200200100235001220011233001225335002101b10010182333573466e3c00403c064060cd404c01403488d4008888894cd4ccd5cd19b8f00500600e00d100e133573892123636865636b5369676e656442794f7261636c653a2057726f6e67206f70657261746f720000d32001355009221122253350011350032200122133350052200230040023335530071200100500400111220021221223300100400323562623263200533573892128496e76616c696420646174756d20666f72207468652070726f76696465642072656465656d65722e0000512200212200149848004448c8c00400488cc00cc008008004cd4488cd4488ccccc00922011c1a550d5f572584e1add125b5712f709ac3b9828ad86581a4759022ba0033550044891c363a52dab212e1008af1d8fcb51398617087d570e274aa483b3772710048810a4f7261636c65466565640033550044891c363a52dab212e1008af1d8fcb51398617087d570e274aa483b3772710048810841676753746174650033550044891c436941ead56c61dbf9b92b5f566f7d5b9cac08f8c957f28f0bd60d4b0048810c5041594d454e54544f4b454e0033550044891c363a52dab212e1008af1d8fcb51398617087d570e274aa483b377271004881084e6f646546656564002222212333330010060050040030022001112212330010030021120011"  # pylint: disable=line-too-long
        )
    )
)


async def get_mocked_utxos(*args, **kwargs):
    """Overrides initalization. receives params, and returns utxos"""

    if args or kwargs:
        return MOCKED_UTXOS_RESPONSE

    return MOCKED_UTXOS_RESPONSE


async def async_get_mocked_utxos():
    """Overrides initalization. receives params, and returns utxos with async"""

    utxos = utxo_mocker(MOCKED_ORACLE_ADDRESS, MOCKED_UTXO_JSON)
    return utxos


MOCKED_RATE_CLASS = AggregatedCoinRate()
MOCKED_RATE_CLASS.add_base_data_provider(
    "generic",
    "kraken",
    {
        "symbol": "ADAUSD",
        "api_url": "https://api.kraken.com",
        "path": "/0/public/Ticker?pair=",
        "json_path": ["result", "ADAUSD", "o"],
        "key": {},
    },
    db_session=None,
)
MOCKED_RATE_CLASS.add_base_data_provider(
    "generic",
    "kucoin",
    {
        "symbol": "BTC-USDT",
        "api_url": "https://openapi-sandbox.kucoin.com",
        "path": "/api/v1/market/orderbook/level1?symbol=",
        "json_path": ["data", "price"],
        "key": {},
    },
    db_session=None,  # Add the missing argument 'db_session'
)
